# 菜单栏股票价格显示应用

一个精简而功能强大的 macOS 菜单栏应用，用于实时监控股票价格和市场动态。

![应用截图](docs/screenshot.png)

## 功能特点

- 在 macOS 菜单栏实时显示股票价格和涨跌情况
- 支持多股票管理，可添加、删除和切换监控的股票
- 自定义显示格式（股票代码、价格、涨跌幅等）
- 根据涨跌情况动态改变显示颜色
- 下拉菜单展示更多股票详细信息
- 简易价格趋势图表
- 价格突破和重要阈值通知
- 低资源占用，适合长时间运行

## 技术栈

- **编程语言:** Swift 5.8+
- **界面框架:** SwiftUI + AppKit
- **架构模式:** MVVM
- **数据源:** SwiftYFinance (雅虎财经 API)
- **异步处理:** Combine
- **持久化:** UserDefaults
- **日志系统:** OSLog

## 系统要求

- macOS 13 Ventura 或更高版本
- 网络连接（用于获取实时股票数据）

## 安装指南

### 方法一：直接下载

1. 从 [Releases](https://github.com/yourusername/menu_bar_stock_info/releases) 页面下载最新版本的 `.dmg` 文件
2. 打开 `.dmg` 文件并将应用拖到应用程序文件夹
3. 从应用程序文件夹启动应用

### 方法二：从源码构建

1. 克隆仓库到本地：
```bash
git clone https://github.com/yourusername/menu_bar_stock_info.git
cd menu_bar_stock_info
```

2. 使用 Xcode 打开项目：
```bash
open menu_bar_stock_info.xcodeproj
```

3. 在 Xcode 中构建和运行应用（⌘+R）

## 使用说明

### 基本操作

- **查看股票信息:** 点击菜单栏图标查看当前监控的股票详情
- **添加股票:** 在设置面板中输入股票代码并点击"添加"按钮
- **删除股票:** 在设置面板的股票列表中选择要删除的股票，点击删除按钮
- **切换显示股票:** 在下拉菜单中选择要在菜单栏显示的股票

### 自定义设置

- **显示格式:** 在设置面板中选择菜单栏显示的信息（如股票代码、价格、涨跌幅等）
- **刷新频率:** 调整数据更新频率（如每分钟、每5分钟等）
- **外观设置:** 自定义字体大小、颜色和显示样式
- **通知设置:** 配置价格阈值和市场开闭市通知

## 隐私声明

本应用仅从公开的 API 获取股票数据，不收集用户的个人信息。所有配置数据仅存储在本地设备上。

## 常见问题

**问题：应用显示的数据与我在其他平台看到的不一致**
> 答：由于使用第三方 API，数据可能有 15-20 分钟的延迟，特别是对于实时行情数据。

**问题：应用消耗的资源过多**
> 答：尝试降低数据刷新频率，这将减少网络请求和处理量。

**问题：某些股票代码无法添加**
> 答：确保输入的是有效的股票代码。对于国际股票，可能需要添加市场后缀（如 AAPL 对应美股苹果公司）。

## 开源协议

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 贡献

欢迎贡献代码、报告问题或提出新功能建议！请先 fork 本仓库并提交 pull request。

## 致谢

- [SwiftYFinance](https://github.com/AlexRoar/SwiftYFinance) - 提供雅虎财经数据接口
- 所有测试和提供反馈的用户 